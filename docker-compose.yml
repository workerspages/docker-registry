version: '3.8'

services:
  registry:
    image: ghcr.io/workerspages/docker-registry:latest
    container_name: docker-hub-registry
    restart: unless-stopped
    ports:
      - "5000:5000"
    environment:
      - AUTH_USER=admin                                  # ä¿®æ”¹è¿™é‡Œï¼šä½ çš„ç”¨æˆ·å
      - AUTH_PASS=SuperSecret123                         # ä¿®æ”¹è¿™é‡Œï¼šä½ çš„å¯†ç 
      - REGISTRY_HTTP_SECRET=change_me_to_random_string  # HTTP ç­¾åå¯†é’¥ï¼Œå»ºè®®ä¿®æ”¹ä¸ºéšæœºå­—ç¬¦ä¸²

      # -------------------------------------------------------
      # â˜ï¸ å­˜å‚¨é…ç½® (å¯é€‰ï¼šå¯¹è±¡å­˜å‚¨ S3/OSS)
      # å¦‚æœåœ¨ PaaS éƒ¨ç½²ï¼Œå¿…é¡»å–æ¶ˆæ³¨é‡Šå¹¶é…ç½®ä»¥ä¸‹å†…å®¹ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±
      # -------------------------------------------------------
      # - REGISTRY_STORAGE=s3
      # - REGISTRY_STORAGE_S3_ACCESSKEY=ä½ çš„AccessKey
      # - REGISTRY_STORAGE_S3_SECRETKEY=ä½ çš„SecretKey
      # - REGISTRY_STORAGE_S3_REGION=ap-northeast-1
      # - REGISTRY_STORAGE_S3_BUCKET=ä½ çš„Bucketåç§°
      # - REGISTRY_STORAGE_S3_ROOTDIRECTORY=/registry-data

    volumes:
      # -------------------------------------------------------
      # ğŸ’¾ æœ¬åœ°å­˜å‚¨ (å¦‚æœä¸ä½¿ç”¨ S3)
      # å¦‚æœä½ æ˜¯æœ¬åœ°/VPS éƒ¨ç½²ï¼Œå»ºè®®ä¿ç•™æ­¤æŒ‚è½½
      # å¦‚æœä½ æ˜¯çº¯ PaaS ç¯å¢ƒä¸”é…ç½®äº† S3ï¼Œè¿™ä¸€è¡Œå¯ä»¥åˆ é™¤
      # -------------------------------------------------------
      - ./data:/var/lib/registry
